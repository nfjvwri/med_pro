{% extends "layout.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
<div class="grid">
  <section class="card">
    <h2>Save BMI</h2>
    <form id="saveForm" onsubmit="return false;">
      <div class="row">
        <label>Weight (kg)
          <input id="s_weight" type="number" step="0.1" min="1" placeholder="62.5" required>
        </label>
        <label>Height (cm)
          <input id="s_height" type="number" step="0.1" min="30" placeholder="170" required>
        </label>
      </div>
      <label>Note (optional)
        <input id="s_note" placeholder="e.g. morning measurement">
      </label>
      <div class="actions">
        <button id="s_calc" class="btn">Calc & Save</button>
        <button id="s_cancel" class="btn ghost" type="button">Reset</button>
      </div>
    </form>

    <div id="s_result" class="result-card small">
      <div class="small">Result</div>
      <div id="s_bmi" class="big">—</div>
      <div id="s_cat" class="category">—</div>
    </div>
  </section>

  <aside class="card">
    <h3>History</h3>
    {% if history %}
      <table class="history">
        <thead><tr><th>Date</th><th>BMI</th><th>Category</th><th>Weight</th><th>Height</th><th>Note</th></tr></thead>
        <tbody>
          {% for r in history %}
            <tr>
              <td>{{ r.recorded_at.split('T')[0] }}</td>
              <td>{{ r.bmi }}</td>
              <td>{{ r.category }}</td>
              <td>{{ r.weight }}</td>
              <td>{{ r.height_cm }}</td>
              <td>{{ r.note or '' }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p class="muted">No saved measurements yet — use the form to save your first one.</p>
    {% endif %}
  </aside>
</div>
{% endblock %}
